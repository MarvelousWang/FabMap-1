<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="stylesheet" type="text/css" href="/static/css/fabmap.css">
{#    <script src="/static/js/jquery.min.js" type="text/javascript"></script>#}
{#    <script src="/static/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>#}
<script>
//普通js函数
function axis(event) {
 event = event || window.event;
 var x = event.offsetX || event.layerX;
 var y = event.offsetY || event.layerY;
 document.getElementById("start_point").value = (x+","+y);
  }
</script>
</head>
<body>
<label class = floor>&nbsp;&nbsp;L40</label>
<div id="mapL40" onmousemove="axis(event)">
    <svg width="100%" height="100%" version="1.1">
        {% for one_eq_vertex in all_vertex %}<polygon points="{{ one_eq_vertex }}" style="fill:#cccccc;stroke:#000000;stroke-width:0.3"/>{% endfor %}
        <polyline points="{{ path_node }}" style="fill:None;stroke:red;stroke-width:2"/>
    </svg>
</div>
<label class = floor>&nbsp;&nbsp;&nbsp;L20</label>
<div id="mapL20" onmousemove="axis(event)">
    <svg width="100%" height="100%" version="1.1">
        {% for one_eq_vertex in all_vertex %}<polygon points="{{ one_eq_vertex }}" style="fill:#cccccc;stroke:#000000;stroke-width:0.3"/>{% endfor %}
        <polyline points="{{ path_axis }}" style="fill:None;stroke:red;stroke-width:2"/>
    </svg>
</div>
<div id="nav">
    <h3>请输入坐标:</h3>
    <form action="{% url 'fabmap' %}" method="post" autocomplete="off">
        <div class="marb8 {% if login_form.errors.username %}errorput{% endif %}">
            <label>起点楼层</label>
            <input type="radio" name="start_floor" value="L20" />L20
            <input type="radio" name="start_floor" value="L40" />L40
        </div>
        <div class="marb8 {% if login_form.errors.username %}errorput{% endif %}">
            <label>起点坐标</label>
            <input name="start_point" id="start_point" type="text" placeholder="例:100,100" />
        </div>
        <div class="marb8 {% if login_form.errors.username %}errorput{% endif %}">
            <label>终点楼层</label>
            <input type="radio" name="end_floor" value="L20" />L20
            <input type="radio" name="end_floor" value="L40" />L40
        </div>
        <div class="marb8">
            <label>终点坐标</label>
            <input name="end_point" id="end_point" type="text" placeholder="例:200,200" />
        </div>
         <input id="loginBtn" type="submit" value="立即查询 > " />
        {% csrf_token %}
    </form>
    <form action="{% url 'fabmap' %}" method="get" autocomplete="off">
        <input id="calBtn" type="submit" name="purpose" value="重算路径" />
        {% csrf_token %}
    </form>
    <div>
        <h3>路径轨迹:</h3>
        <p id="test">{{ msg1 }}</p>
        <p>{{ path_node }}</p>
    </div>
</div>
</body>
</html>